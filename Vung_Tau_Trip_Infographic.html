<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch√†o nƒÉm m·ªõi OS2-DX V≈©ng t√†u 2026</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Marked.js for Markdown rendering in chat -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Custom Palette & Styles -->
    <style>
        :root {
            /* Palette: Tropical Vibrance */
            --color-bg: #F0F9FF; /* Light Sky Blue */
            --color-card: #FFFFFF;
            --color-primary: #0284C7; /* Ocean Blue */
            --color-secondary: #F59E0B; /* Sun Amber */
            --color-accent: #EF4444; /* Coral Red */
            --color-text: #1E293B; /* Slate 800 */
        }

        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        /* Timeline Styles */
        .timeline-line {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background-color: #CBD5E1;
            z-index: 0;
        }
        
        .timeline-item {
            position: relative;
            z-index: 10;
        }

        /* Utilities */
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* AI Chat Widget Styles */
        .ai-widget-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 50;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .ai-widget-btn:hover {
            transform: scale(1.1);
        }

        .ai-chat-window {
            position: fixed;
            bottom: 6rem;
            right: 2rem;
            width: 90%;
            max-width: 400px;
            height: 500px;
            z-index: 49;
            transform-origin: bottom right;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
        }

        .ai-chat-window.hidden-chat {
            opacity: 0;
            transform: scale(0.9) translateY(20px);
            pointer-events: none;
        }

        .chat-message {
            margin-bottom: 1rem;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .chat-message.user {
            background-color: #0284C7;
            color: white;
            align-self: flex-end;
            margin-left: 2rem;
        }

        .chat-message.ai {
            background-color: #F3F4F6;
            color: #1F2937;
            align-self: flex-start;
            margin-right: 2rem;
            border-left: 3px solid #F59E0B;
        }

        .chat-message.ai p {
            margin-bottom: 0.5rem;
        }
        .chat-message.ai ul {
            list-style-type: disc;
            margin-left: 1.2rem;
        }
        
        .typing-indicator span {
            display: inline-block;
            width: 6px;
            height: 6px;
            background-color: #9CA3AF;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out both;
            margin: 0 1px;
        }
        
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
    </style>
    <!-- 
    PALETTE SELECTION: "Tropical Vibrance" 
    Primary: #0284C7 (Ocean Blue)
    Secondary: #F59E0B (Sun/Sand)
    Accent: #EF4444 (Alerts/Highlights)
    
    AI INTEGRATION:
    - Updated for Team OS2-DX with specific member names.
    - Integrated Gemini API for Q&A about the trip.
    
    NO SVG USED. NO MERMAID USED.
    -->
</head>
<body class="antialiased selection:bg-yellow-200 selection:text-blue-900">

    <!-- HERO SECTION -->
    <header class="w-full bg-gradient-to-r from-cyan-600 to-blue-700 text-white shadow-lg">
        <div class="container mx-auto px-4 py-12 text-center">
            <div class="inline-block bg-yellow-400 text-blue-900 font-bold px-3 py-1 rounded-full text-sm mb-4">
                02/01/2026 - 03/01/2026
            </div>
            <h1 class="text-3xl md:text-5xl font-extrabold mb-4 tracking-tight uppercase leading-tight">
                Ch√†o nƒÉm m·ªõi<br class="md:hidden"> OS2-DX V≈©ng T√†u 2026
            </h1>
            <p class="text-xl md:text-2xl font-light opacity-90 mb-2">
                Th·ª≠ th√°ch Ph∆∞·ª£t "Ngon - B·ªï - R·∫ª"
            </p>
            
            <!-- Team Members List -->
            <div class="inline-block bg-white/10 backdrop-blur-md rounded-xl p-4 mb-6 border border-white/20">
                <span class="block text-xs uppercase tracking-wider text-blue-200 mb-1">Bi·ªát ƒê·ªôi OS2-DX</span>
                <p class="text-sm md:text-lg font-bold text-white">
                    nguyn_don_wut ‚Ä¢ √ân (b√© Na) ‚Ä¢ duyhung ‚Ä¢ h·ªØu khen
                    <span class="block text-xs font-normal opacity-75 mt-1">(...v√† nh·ªØng ng∆∞·ªùi b·∫°n b√≠ ·∫©n kh√°c)</span>
                </p>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-3xl mx-auto mt-4">
                <div class="bg-white/20 backdrop-blur rounded-lg p-3">
                    <div class="text-2xl">üë•</div>
                    <div class="font-bold">4+ Th√†nh vi√™n</div>
                </div>
                <div class="bg-white/20 backdrop-blur rounded-lg p-3">
                    <div class="text-2xl">üõµ</div>
                    <div class="font-bold">Xe m√°y</div>
                </div>
                <div class="bg-white/20 backdrop-blur rounded-lg p-3">
                    <div class="text-2xl">üí∞</div>
                    <div class="font-bold">1 Tri·ªáu/Ng∆∞·ªùi</div>
                </div>
                <div class="bg-white/20 backdrop-blur rounded-lg p-3">
                    <div class="text-2xl">üåä</div>
                    <div class="font-bold">2 Ng√†y 1 ƒê√™m</div>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-10 space-y-16 pb-32">

        <!-- SECTION 1: PREPARATION -->
        <section id="preparation">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-blue-800 mb-6 flex items-center gap-3 border-b-4 border-yellow-400 pb-2 inline-block">
                    <span>üõ†Ô∏è</span> C√¥ng T√°c Chu·∫©n B·ªã
                </h2>
                <p class="text-gray-600 mb-8 text-lg">
                    Team <strong>OS2-DX</strong> ch√∫ √Ω! Tr∆∞·ªõc khi lƒÉn b√°nh, c√¥ng t√°c chu·∫©n b·ªã l√† ch√¨a kh√≥a ƒë·ªÉ chuy·∫øn ƒëi an to√†n v√† su√¥n s·∫ª.
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Card 1 -->
                    <div class="glass-card shadow-lg rounded-xl p-6 border-t-4 border-blue-500 hover:shadow-xl transition-shadow">
                        <div class="text-4xl mb-4 text-center">üèçÔ∏è</div>
                        <h3 class="text-xl font-bold text-center mb-3 text-blue-700">Ki·ªÉm Tra Xe</h3>
                        <ul class="text-gray-700 text-sm space-y-2 list-none">
                            <li class="flex items-start"><span class="mr-2 text-green-500">‚úî</span> Thay nh·ªõt, ki·ªÉm tra phanh & l·ªëp.</li>
                            <li class="flex items-start"><span class="mr-2 text-green-500">‚úî</span> L·∫Øp ƒë·ªß 2 g∆∞∆°ng chi·∫øu h·∫≠u.</li>
                            <li class="flex items-start"><span class="mr-2 text-green-500">‚úî</span> Gi·∫•y t·ªù xe & B·∫£o hi·ªÉm (VNeID).</li>
                        </ul>
                    </div>

                    <!-- Card 2 -->
                    <div class="glass-card shadow-lg rounded-xl p-6 border-t-4 border-yellow-500 hover:shadow-xl transition-shadow">
                        <div class="text-4xl mb-4 text-center">üè®</div>
                        <h3 class="text-xl font-bold text-center mb-3 text-yellow-600">ƒê·∫∑t Ph√≤ng S·ªõm</h3>
                        <p class="text-sm text-gray-700 mb-2 font-semibold">Deadline: Tr∆∞·ªõc 2 tu·∫ßn!</p>
                        <ul class="text-gray-700 text-sm space-y-2 list-none">
                            <li class="flex items-start"><span class="mr-2 text-yellow-500">‚òÖ</span> Khu v·ª±c: Phan Chu Trinh / V√µ Th·ªã S√°u.</li>
                            <li class="flex items-start"><span class="mr-2 text-yellow-500">‚òÖ</span> Gi√°: 500k - 600k/ph√≤ng 4 ng∆∞·ªùi.</li>
                            <li class="flex items-start"><span class="mr-2 text-yellow-500">‚òÖ</span> Tr√°nh khu Th√πy V√¢n ƒë·ªÉ ti·∫øt ki·ªám.</li>
                        </ul>
                    </div>

                    <!-- Card 3 -->
                    <div class="glass-card shadow-lg rounded-xl p-6 border-t-4 border-red-500 hover:shadow-xl transition-shadow">
                        <div class="text-4xl mb-4 text-center">üéí</div>
                        <h3 class="text-xl font-bold text-center mb-3 text-red-600">H√†nh Trang</h3>
                        <ul class="text-gray-700 text-sm space-y-2 list-none">
                            <li class="flex items-start"><span class="mr-2 text-red-400">‚û§</span> √Åo kho√°c, K√≠nh r√¢m, Kem ch·ªëng n·∫Øng.</li>
                            <li class="flex items-start"><span class="mr-2 text-red-400">‚û§</span> D√©p l√†o/Sandal ƒëi bi·ªÉn.</li>
                            <li class="flex items-start"><span class="mr-2 text-red-400">‚û§</span> S·∫°c d·ª± ph√≤ng ƒë·∫ßy pin.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: BUDGET ANALYSIS -->
        <section id="budget" class="bg-white rounded-2xl shadow-xl p-8">
            <h2 class="text-3xl font-bold text-blue-800 mb-6 flex items-center gap-3 border-b-4 border-yellow-400 pb-2 inline-block">
                <span>üí∏</span> Ph√¢n T√≠ch T√†i Ch√≠nh
            </h2>
            <p class="text-gray-600 mb-8 text-lg">
                T·ªïng ng√¢n s√°ch m·ª•c ti√™u l√† <strong>1.000.000 VNƒê/ng∆∞·ªùi</strong>. D∆∞·ªõi ƒë√¢y l√† c√°ch team ph√¢n b·ªï d√≤ng ti·ªÅn ƒë·ªÉ ƒë·∫£m b·∫£o "Ngon" nh∆∞ng v·∫´n "R·∫ª".
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <!-- Chart 1: Donut Distribution -->
                <div class="flex flex-col items-center">
                    <h3 class="text-lg font-bold text-gray-700 mb-4 text-center">C∆° C·∫•u Chi Ti√™u</h3>
                    <div class="chart-container">
                        <canvas id="budgetDonutChart"></canvas>
                    </div>
                    <p class="text-sm text-gray-500 mt-4 text-center italic max-w-xs">
                        Chi ph√≠ ƒÇn U·ªëng chi·∫øm 60% ng√¢n s√°ch, cho th·∫•y tr·ªçng t√¢m chuy·∫øn ƒëi l√† tr·∫£i nghi·ªám ·∫©m th·ª±c.
                    </p>
                </div>

                <!-- Chart 2: Detailed Bar -->
                <div class="flex flex-col items-center">
                    <h3 class="text-lg font-bold text-gray-700 mb-4 text-center">Chi Ti·∫øt H·∫°ng M·ª•c (VNƒê)</h3>
                    <div class="chart-container">
                        <canvas id="budgetBarChart"></canvas>
                    </div>
                    <p class="text-sm text-gray-500 mt-4 text-center italic max-w-xs">
                        Qu·ªπ d·ª± ph√≤ng 500k gi√∫p an t√¢m tr∆∞·ªõc c√°c s·ª± c·ªë xe c·ªô ho·∫∑c ph√°t sinh nh·ªè.
                    </p>
                </div>
            </div>
        </section>

        <!-- SECTION 3: ITINERARY DAY 1 -->
        <section id="day1">
            <h2 class="text-3xl font-bold text-blue-800 mb-6 flex items-center gap-3 border-b-4 border-yellow-400 pb-2 inline-block">
                <span>üìÖ</span> Ng√†y 1: S√†i G√≤n - Bi·ªÉn Xanh V·∫´y G·ªçi
            </h2>
            <p class="text-gray-600 mb-10 text-lg">
                Kh·ªüi h√†nh t·ª´ s·ªõm tinh m∆° ƒë·ªÉ ƒë√≥n n·∫Øng ƒë·∫πp v√† tr√°nh k·∫πt xe. Ng√†y ƒë·∫ßu ti√™n t·∫≠p trung v√†o di chuy·ªÉn v√† kh√°m ph√° c√°c bi·ªÉu t∆∞·ª£ng c·ªßa V≈©ng T√†u.
            </p>

            <div class="relative max-w-3xl mx-auto">
                <!-- Vertical Line -->
                <div class="hidden md:block timeline-line bg-blue-200"></div>

                <!-- Timeline Item 1 -->
                <div class="timeline-item flex flex-col md:flex-row items-center justify-between mb-8 w-full">
                    <div class="order-1 w-full md:w-5/12"></div>
                    <div class="z-20 flex items-center order-1 bg-blue-500 shadow-xl w-12 h-12 rounded-full justify-center text-white font-bold text-sm">05:30</div>
                    <div class="order-1 w-full md:w-5/12 px-6 py-4 bg-white rounded-lg shadow-md border-l-4 border-blue-500 mt-4 md:mt-0">
                        <h3 class="font-bold text-blue-800 text-lg">Xu·∫•t Ph√°t</h3>
                        <p class="text-sm text-gray-600">T·∫≠p trung t·∫°i ph√† C√°t L√°i. ƒêi ƒë∆∞·ªùng Nh∆°n Tr·∫°ch ng·∫Øm r·ª´ng cao su, tr√°nh xe container.</p>
                    </div>
                </div>

                <!-- Timeline Item 2 -->
                <div class="timeline-item flex flex-col md:flex-row items-center justify-between mb-8 w-full">
                    <div class="order-1 w-full md:w-5/12 px-6 py-4 bg-white rounded-lg shadow-md border-r-4 border-yellow-500 mt-4 md:mt-0 md:text-right">
                        <h3 class="font-bold text-yellow-700 text-lg">ƒÇn S√°ng Long Th√†nh</h3>
                        <p class="text-sm text-gray-600">B√°nh canh Long H∆∞∆°ng ho·∫∑c Ph·ªü. N·∫°p nƒÉng l∆∞·ª£ng (~50k/ng∆∞·ªùi).</p>
                    </div>
                    <div class="z-20 flex items-center order-1 bg-yellow-500 shadow-xl w-12 h-12 rounded-full justify-center text-white font-bold text-sm">07:00</div>
                    <div class="order-1 w-full md:w-5/12"></div>
                </div>

                <!-- Timeline Item 3 -->
                <div class="timeline-item flex flex-col md:flex-row items-center justify-between mb-8 w-full">
                    <div class="order-1 w-full md:w-5/12"></div>
                    <div class="z-20 flex items-center order-1 bg-blue-500 shadow-xl w-12 h-12 rounded-full justify-center text-white font-bold text-sm">09:30</div>
                    <div class="order-1 w-full md:w-5/12 px-6 py-4 bg-white rounded-lg shadow-md border-l-4 border-blue-500 mt-4 md:mt-0">
                        <h3 class="font-bold text-blue-800 text-lg">Check-in Ng·ªçn H·∫£i ƒêƒÉng</h3>
                        <p class="text-sm text-gray-600">Ng·∫Øm to√†n c·∫£nh ph·ªë bi·ªÉn. <strong>Must try:</strong> Yaourt c√¥ Ti√™n & Tr·ª©ng l√≤ng ƒë√†o.</p>
                    </div>
                </div>

                <!-- Timeline Item 4 -->
                <div class="timeline-item flex flex-col md:flex-row items-center justify-between mb-8 w-full">
                    <div class="order-1 w-full md:w-5/12 px-6 py-4 bg-white rounded-lg shadow-md border-r-4 border-yellow-500 mt-4 md:mt-0 md:text-right">
                        <h3 class="font-bold text-yellow-700 text-lg">B√°nh Kh·ªçt Th·∫ßn Th√°nh</h3>
                        <p class="text-sm text-gray-600">G·ªëc V√∫ S·ªØa ho·∫∑c B√°nh kh·ªçt Mi·ªÅn ƒê√¥ng. ƒê·∫∑c s·∫£n kh√¥ng th·ªÉ b·ªè qua (~60k/ng∆∞·ªùi).</p>
                    </div>
                    <div class="z-20 flex items-center order-1 bg-yellow-500 shadow-xl w-12 h-12 rounded-full justify-center text-white font-bold text-sm">11:30</div>
                    <div class="order-1 w-full md:w-5/12"></div>
                </div>

                <!-- Timeline Item 5 -->
                <div class="timeline-item flex flex-col md:flex-row items-center justify-between mb-8 w-full">
                    <div class="order-1 w-full md:w-5/12"></div>
                    <div class="z-20 flex items-center order-1 bg-blue-500 shadow-xl w-12 h-12 rounded-full justify-center text-white font-bold text-sm">15:30</div>
                    <div class="order-1 w-full md:w-5/12 px-6 py-4 bg-white rounded-lg shadow-md border-l-4 border-blue-500 mt-4 md:mt-0">
                        <h3 class="font-bold text-blue-800 text-lg">Vitamin Sea & Ho√†ng H√¥n</h3>
                        <p class="text-sm text-gray-600">T·∫Øm B√£i Sau. SƒÉn ·∫£nh t·∫°i H·∫ªm 107 Tr·∫ßn Ph√∫ ho·∫∑c M≈©i Nghinh Phong.</p>
                    </div>
                </div>

                <!-- Timeline Item 6 -->
                <div class="timeline-item flex flex-col md:flex-row items-center justify-between mb-8 w-full">
                    <div class="order-1 w-full md:w-5/12 px-6 py-4 bg-white rounded-lg shadow-md border-r-4 border-red-500 mt-4 md:mt-0 md:text-right">
                        <h3 class="font-bold text-red-600 text-lg">ƒê·∫°i Ti·ªác H·∫£i S·∫£n</h3>
                        <p class="text-sm text-gray-600">·ªêc T·ª± Nhi√™n ho·∫∑c Ch·ª£ ƒê√™m. B·∫°ch tu·ªôc n∆∞·ªõng, ·ªëc h∆∞∆°ng, ngh√™u h·∫•p (~200k/ng∆∞·ªùi).</p>
                    </div>
                    <div class="z-20 flex items-center order-1 bg-red-500 shadow-xl w-12 h-12 rounded-full justify-center text-white font-bold text-sm">18:30</div>
                    <div class="order-1 w-full md:w-5/12"></div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: ITINERARY DAY 2 -->
        <section id="day2">
            <h2 class="text-3xl font-bold text-blue-800 mb-6 flex items-center gap-3 border-b-4 border-yellow-400 pb-2 inline-block">
                <span>‚òÄÔ∏è</span> Ng√†y 2: Kh√°m Ph√° & Tr·ªü V·ªÅ
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Morning Block -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300">
                    <div class="bg-yellow-100 p-4 border-b border-yellow-200">
                        <span class="font-bold text-yellow-800">07:00 - 08:30</span>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2 text-gray-800">B√°nh M√¨ Ch·∫£o & B√¨nh Minh</h3>
                        <p class="text-gray-600 text-sm">N·∫°p nƒÉng l∆∞·ª£ng v·ªõi B√°nh m√¨ ch·∫£o x√≠u m·∫°i (H√†ng Quy√™n/56). ƒê√≥n n·∫Øng s·ªõm trong l√†nh.</p>
                    </div>
                </div>

                <!-- Sightseeing Block -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300">
                    <div class="bg-blue-100 p-4 border-b border-blue-200">
                        <span class="font-bold text-blue-800">08:30 - 11:30</span>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2 text-gray-800">S·ªëng ·∫¢o & VƒÉn H√≥a</h3>
                        <ul class="text-sm text-gray-600 space-y-2">
                            <li>üèõÔ∏è <strong>B·∫°ch Dinh:</strong> Ki·∫øn tr√∫c Ph√°p c·ªï k√≠nh (V√© ~15k).</li>
                            <li>‚õ∞Ô∏è <strong>ƒê·ªìi Con Heo:</strong> View "ch·∫•t l·ª´" nh√¨n xu·ªëng B√£i Sau.</li>
                        </ul>
                    </div>
                </div>

                <!-- Lunch Block -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300">
                    <div class="bg-red-100 p-4 border-b border-red-200">
                        <span class="font-bold text-red-800">12:00 - 13:30</span>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2 text-gray-800">L·∫©u C√° ƒêu·ªëi</h3>
                        <p class="text-gray-600 text-sm">ƒê·∫∑c s·∫£n tr·ª© danh V≈©ng T√†u. Qu√°n Ho√†ng Minh ho·∫∑c √öt M∆∞·ªùi (~150k/ng∆∞·ªùi).</p>
                    </div>
                </div>

                <!-- Shopping Block -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300">
                    <div class="bg-purple-100 p-4 border-b border-purple-200">
                        <span class="font-bold text-purple-800">13:30 - 14:30</span>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-2 text-gray-800">Mua Qu√†</h3>
                        <p class="text-gray-600 text-sm">B√¥ng lan tr·ª©ng mu·ªëi G·ªëc C·ªôt ƒêi·ªán, n∆∞·ªõc m·∫Øm, c√° kh√¥ mang h∆∞∆°ng v·ªã bi·ªÉn v·ªÅ nh√†.</p>
                    </div>
                </div>

                <!-- Return Block -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 md:col-span-2">
                    <div class="bg-gray-100 p-4 border-b border-gray-200">
                        <span class="font-bold text-gray-800">14:30 - 18:00</span>
                    </div>
                    <div class="p-6 flex flex-col md:flex-row justify-between items-center">
                        <div>
                            <h3 class="font-bold text-xl mb-2 text-gray-800">H√†nh Tr√¨nh V·ªÅ S√†i G√≤n</h3>
                            <p class="text-gray-600 text-sm">Gh√© B√≤ s·ªØa Long Th√†nh ngh·ªâ ch√¢n. V·ªÅ s·ªõm tr√°nh k·∫πt xe c·ª≠a ng√µ.</p>
                        </div>
                        <div class="text-4xl mt-4 md:mt-0">üèÅ</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 5: IMPORTANT NOTES -->
        <section id="notes" class="bg-red-50 border border-red-100 rounded-2xl p-8">
            <h2 class="text-3xl font-bold text-red-700 mb-6 flex items-center gap-3">
                <span>‚ö†Ô∏è</span> L∆∞u √ù Quan Tr·ªçng
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="flex items-start gap-4">
                    <div class="bg-red-200 p-3 rounded-full text-2xl">üëÆ</div>
                    <div>
                        <h4 class="font-bold text-lg text-red-900">T·ªëc ƒê·ªô & CSGT</h4>
                        <p class="text-sm text-red-800">ƒê·∫∑c bi·ªát ch√∫ √Ω QL51, ƒë∆∞·ªùng 3/2 v√† Th√πy V√¢n. Lu√¥n tu√¢n th·ªß t·ªëc ƒë·ªô 50-60km/h ƒë·ªÉ tr√°nh b·ªã ph·∫°t.</p>
                    </div>
                </div>
                <div class="flex items-start gap-4">
                    <div class="bg-red-200 p-3 rounded-full text-2xl">üí∏</div>
                    <div>
                        <h4 class="font-bold text-lg text-red-900">Tr√°nh "Ch·∫∑t Ch√©m"</h4>
                        <p class="text-sm text-red-800">H·ªèi gi√° tr∆∞·ªõc khi ƒÉn u·ªëng v·ªâa h√®. Kh√¥ng ƒëi theo "c√≤ m·ªìi" xe √¥m/x√≠ch l√¥ v√†o qu√°n h·∫£i s·∫£n l·∫°.</p>
                    </div>
                </div>
                <div class="flex items-start gap-4">
                    <div class="bg-red-200 p-3 rounded-full text-2xl">üíµ</div>
                    <div>
                        <h4 class="font-bold text-lg text-red-900">Ti·ªÅn M·∫∑t & Qu·ªπ</h4>
                        <p class="text-sm text-red-800">Mang ƒë·ªß ti·ªÅn m·∫∑t l·∫ª. B·∫ßu ra m·ªôt "Th·ªß qu·ªπ" ƒë·ªÉ chi ti·ªÅn ƒÉn chung cho c·∫£ nh√≥m ƒë·ª° r·ªëi.</p>
                    </div>
                </div>
                <div class="flex items-start gap-4">
                    <div class="bg-red-200 p-3 rounded-full text-2xl">üó∫Ô∏è</div>
                    <div>
                        <h4 class="font-bold text-lg text-red-900">Google Maps</h4>
                        <p class="text-sm text-red-800">S·∫°c ƒë·∫ßy pin v√† c√†i s·∫µn b·∫£n ƒë·ªì offline n·∫øu c·∫ßn. ƒê·ª´ng ƒë·ªÉ l·∫°c ƒë∆∞·ªùng l√†m m·∫•t th·ªùi gian ch∆°i.</p>
                    </div>
                </div>
            </div>
        </section>

        <footer class="text-center text-gray-500 text-sm pb-8">
            <p>¬© 2026 K·∫ø Ho·∫°ch V≈©ng T√†u - Ch√∫ng m√¨nh s·∫Ω c√≥ chuy·∫øn ƒëi an to√†n & vui v·∫ª!Kkkk</p>
        </footer>

    </main>

    <!-- AI ASSISTANT UI -->
    <button id="aiToggleBtn" class="ai-widget-btn bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white rounded-full p-4 shadow-xl flex items-center gap-2 group">
        <span class="text-2xl">‚ú®</span>
        <span class="font-bold hidden group-hover:block transition-all duration-300">Tr·ª£ L√Ω AI</span>
    </button>

    <div id="aiChatWindow" class="ai-chat-window hidden-chat bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden flex flex-col">
        <!-- Chat Header -->
        <div class="bg-gradient-to-r from-blue-600 to-cyan-600 p-4 flex justify-between items-center text-white">
            <div class="flex items-center gap-2">
                <span class="text-xl">ü§ñ</span>
                <div>
                    <h3 class="font-bold">Th·ªï ƒê·ªãa V≈©ng T√†u</h3>
                    <p class="text-xs text-blue-100 opacity-80">H·ªèi g√¨ c≈©ng bi·∫øt!</p>
                </div>
            </div>
            <button id="closeChatBtn" class="hover:bg-white/20 rounded-full p-1 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>

        <!-- Chat History -->
        <div id="chatHistory" class="flex-1 overflow-y-auto p-4 bg-gray-50">
            <div class="chat-message ai">
                <p>Ch√†o nh√≥m OS2-DX! M√¨nh l√† Th·ªï ƒë·ªãa V≈©ng T√†u AI. C·∫ßn t√¨m ch·ªó ƒÉn ch∆°i cho b√© Na, nguyn_don_wut, duyhung, h·ªØu khen th√¨ c·ª© h·ªèi m√¨nh nh√©! ‚ú®</p>
            </div>
        </div>

        <!-- Quick Prompts -->
        <div class="px-4 py-2 bg-gray-50 border-t border-gray-200 overflow-x-auto whitespace-nowrap scrollbar-hide">
            <button onclick="sendQuickPrompt('G·ª£i √Ω qu√°n cafe view bi·ªÉn ƒë·∫πp gi√° r·∫ª')" class="inline-block px-3 py-1 bg-white border border-blue-200 text-blue-600 rounded-full text-xs hover:bg-blue-50 mr-2">‚òï Cafe View Bi·ªÉn</button>
            <button onclick="sendQuickPrompt('T√¨m nh√† thu·ªëc g·∫ßn B√£i Sau')" class="inline-block px-3 py-1 bg-white border border-blue-200 text-blue-600 rounded-full text-xs hover:bg-blue-50 mr-2">üíä Nh√† thu·ªëc</button>
            <button onclick="sendQuickPrompt('G·ª£i √Ω ch·ªó ƒÉn khuya ngon r·∫ª')" class="inline-block px-3 py-1 bg-white border border-blue-200 text-blue-600 rounded-full text-xs hover:bg-blue-50 mr-2">üçú ƒÇn khuya</button>
            <button onclick="sendQuickPrompt('Tr·ªùi m∆∞a th√¨ ƒëi ch∆°i ·ªü ƒë√¢u V≈©ng T√†u?')" class="inline-block px-3 py-1 bg-white border border-blue-200 text-blue-600 rounded-full text-xs hover:bg-blue-50">‚òî M∆∞a ƒëi ƒë√¢u?</button>
        </div>

        <!-- Input Area -->
        <div class="p-4 bg-white border-t border-gray-200">
            <div class="flex items-center gap-2">
                <input type="text" id="userQueryInput" placeholder="Nh·∫≠p c√¢u h·ªèi..." class="flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                <button id="sendBtn" class="bg-blue-600 text-white rounded-full p-2 hover:bg-blue-700 transition-colors disabled:opacity-50">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- SCRIPT SECTION -->
    <script>
        // --- 1. Label Wrapping Helper Function (16 char limit) ---
        function wrapLabel(str, maxLen = 16) {
            if (str.length <= maxLen) return str;
            
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if ((currentLine + " " + words[i]).length <= maxLen) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // --- 2. Chart.js Global Config for Tooltips ---
        const tooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // --- 3. Budget Donut Chart ---
        const donutCtx = document.getElementById('budgetDonutChart').getContext('2d');
        const budgetLabels = ["ƒÇn u·ªëng", "Ch·ªó ·ªü", "D·ª± ph√≤ng", "XƒÉng xe", "V√© tham quan"];
        const wrappedBudgetLabels = budgetLabels.map(l => wrapLabel(l));

        new Chart(donutCtx, {
            type: 'doughnut',
            data: {
                labels: wrappedBudgetLabels,
                datasets: [{
                    data: [2400000, 600000, 500000, 300000, 200000],
                    backgroundColor: [
                        '#EF4444', // Red - Eating (Biggest)
                        '#F59E0B', // Orange - Hotel
                        '#10B981', // Green - Backup
                        '#3B82F6', // Blue - Gas
                        '#8B5CF6'  // Purple - Tickets
                    ],
                    borderWidth: 2,
                    borderColor: '#ffffff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            font: { size: 12 }
                        }
                    },
                    tooltip: tooltipConfig,
                    title: {
                        display: true,
                        text: 'T·ª∑ L·ªá Ph√¢n B·ªï Ng√¢n S√°ch (T·ªïng 4 Tri·ªáu)',
                        font: { size: 16 }
                    }
                }
            }
        });

        // --- 4. Budget Bar Chart ---
        const barCtx = document.getElementById('budgetBarChart').getContext('2d');
        
        new Chart(barCtx, {
            type: 'bar',
            data: {
                labels: wrappedBudgetLabels,
                datasets: [{
                    label: 'Chi ph√≠ (VNƒê)',
                    data: [2400000, 600000, 500000, 300000, 200000],
                    backgroundColor: '#0284C7',
                    borderRadius: 6,
                }]
            },
            options: {
                indexAxis: 'y', // Horizontal bar for better label reading
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        beginAtZero: true,
                        grid: { display: false }
                    },
                    y: {
                        grid: { display: false }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: tooltipConfig,
                    title: {
                        display: true,
                        text: 'So S√°nh Gi√° Tr·ªã C√°c H·∫°ng M·ª•c',
                        font: { size: 16 }
                    }
                }
            }
        });

        // --- 5. AI Assistant Logic ---
        const aiToggleBtn = document.getElementById('aiToggleBtn');
        const aiChatWindow = document.getElementById('aiChatWindow');
        const closeChatBtn = document.getElementById('closeChatBtn');
        const chatHistory = document.getElementById('chatHistory');
        const userQueryInput = document.getElementById('userQueryInput');
        const sendBtn = document.getElementById('sendBtn');

        // Toggle Chat Window
        function toggleChat() {
            aiChatWindow.classList.toggle('hidden-chat');
        }

        aiToggleBtn.addEventListener('click', toggleChat);
        closeChatBtn.addEventListener('click', toggleChat);

        // Gemini API Configuration
        const apiKey = ""; // API Key provided by environment
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        const systemPrompt = `
            B·∫°n l√† m·ªôt h∆∞·ªõng d·∫´n vi√™n du l·ªãch ƒë·ªãa ph∆∞∆°ng t·∫°i V≈©ng T√†u (Th·ªï ƒë·ªãa V≈©ng T√†u) c·ª±c k·ª≥ am hi·ªÉu v√† th√¢n thi·ªán.
            
            NG·ªÆ C·∫¢NH ƒê·∫∂C BI·ªÜT C·ª¶A NH√ìM:
            - T√™n nh√≥m: OS2-DX
            - Th√†nh vi√™n: nguyn_don_wut, √ân (b√© Na), duyhung, h·ªØu khen (v√† c√≥ th·ªÉ th√™m b·∫°n m·ªõi).
            - Th·ªùi gian: 2 ng√†y 1 ƒë√™m (02/01/2026 - 03/01/2026).
            - Ph∆∞∆°ng ti·ªán: Xe m√°y.
            - Ng√¢n s√°ch: 1 tri·ªáu VNƒê/ng∆∞·ªùi (Ti√™u ch√≠: Ngon - B·ªï - R·∫ª).
            - L·ªãch tr√¨nh c∆° b·∫£n ƒë√£ c√≥: H·∫£i ƒêƒÉng, B√°nh Kh·ªçt, L·∫©u C√° ƒêu·ªëi, B·∫°ch Dinh, ƒê·ªìi Con Heo.

            NHI·ªÜM V·ª§ C·ª¶A B·∫†N:
            - Tr·∫£ l·ªùi c√°c c√¢u h·ªèi v·ªÅ ƒë·ªãa ƒëi·ªÉm ƒÉn u·ªëng, vui ch∆°i, ƒë∆∞·ªùng ƒëi, th·ªùi ti·∫øt.
            - Khi ch√†o h·ªèi ho·∫∑c nh·∫Øc t√™n, h√£y nh·∫Øc ƒë·∫øn t√™n nh√≥m OS2-DX ho·∫∑c c√°c th√†nh vi√™n m·ªôt c√°ch t·ª± nhi√™n, th√¢n thi·ªán.
            - Lu√¥n ∆∞u ti√™n c√°c g·ª£i √Ω ph√π h·ª£p v·ªõi ng√¢n s√°ch sinh vi√™n/b√¨nh d√¢n.
            - Tr·∫£ l·ªùi ng·∫Øn g·ªçn, s√∫c t√≠ch, vui v·∫ª, c√≥ s·ª≠ d·ª•ng emoji.
            - ƒê·ªãnh d·∫°ng c√¢u tr·∫£ l·ªùi b·∫±ng Markdown (d√πng d·∫•u ** in ƒë·∫≠m, - g·∫°ch ƒë·∫ßu d√≤ng).
        `;

        async function callGemini(userText) {
            // Add user message to UI
            appendMessage('user', userText);
            
            // Show typing indicator
            const typingId = appendTypingIndicator();

            try {
                // Construct payload
                const payload = {
                    contents: [{
                        parts: [{
                            text: systemPrompt + "\n\nUser Question: " + userText
                        }]
                    }]
                };

                // Retry logic variables
                let retries = 0;
                const maxRetries = 3;
                let result = null;

                while (retries < maxRetries) {
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        result = await response.json();
                        break; // Success
                    } catch (e) {
                        retries++;
                        if (retries === maxRetries) throw e;
                        await new Promise(r => setTimeout(r, 1000 * Math.pow(2, retries))); // Exponential backoff
                    }
                }

                // Remove typing indicator
                removeMessage(typingId);

                // Process response
                const aiText = result.candidates?.[0]?.content?.parts?.[0]?.text || "Xin l·ªói, m√¨nh ƒëang b·ªã m·∫•t k·∫øt n·ªëi. B·∫°n th·ª≠ l·∫°i x√≠u nh√©!";
                appendMessage('ai', aiText);

            } catch (error) {
                removeMessage(typingId);
                console.error("Gemini API Error:", error);
                appendMessage('ai', "Oops! C√≥ l·ªói x·∫£y ra khi k·∫øt n·ªëi v·ªõi server. Vui l√≤ng th·ª≠ l·∫°i sau.");
            }
        }

        // UI Helper Functions for Chat
        function appendMessage(role, text) {
            const div = document.createElement('div');
            div.className = `chat-message ${role}`;
            
            if (role === 'ai') {
                // Use marked.js for Markdown parsing if it's an AI response
                div.innerHTML = marked.parse(text);
            } else {
                div.textContent = text;
            }
            
            chatHistory.appendChild(div);
            chatHistory.scrollTop = chatHistory.scrollHeight;
            return div.id; // Return ID (though we didn't set one, keeping structure for typing indicator)
        }

        function appendTypingIndicator() {
            const id = 'typing-' + Date.now();
            const div = document.createElement('div');
            div.id = id;
            div.className = 'chat-message ai typing-indicator';
            div.innerHTML = '<span></span><span></span><span></span>';
            chatHistory.appendChild(div);
            chatHistory.scrollTop = chatHistory.scrollHeight;
            return id;
        }

        function removeMessage(id) {
            const el = document.getElementById(id);
            if (el) el.remove();
        }

        function sendQuickPrompt(text) {
            callGemini(text);
        }

        // Event Listeners for Input
        sendBtn.addEventListener('click', () => {
            const text = userQueryInput.value.trim();
            if (text) {
                callGemini(text);
                userQueryInput.value = '';
            }
        });

        userQueryInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const text = userQueryInput.value.trim();
                if (text) {
                    callGemini(text);
                    userQueryInput.value = '';
                }
            }
        });

    </script>
</body>
</html>
